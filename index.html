<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@Custarddolphin Star Force Deck Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body{background:#0f0f1b;color:#00ffcc;font-family:'Courier New',monospace;margin:0}
        .card-img{transition:all .3s;cursor:pointer;border:2px solid #333}
        .card-img:hover{transform:scale(1.2);box-shadow:0 0 30px #00ffcc;border-color:#00ffcc}
        .folder{min-height:300px;border:3px dashed #00ffcc;border-radius:15px;background:#111;padding:10px}
        .count{position:absolute;top:5px;right:5px;background:#ff0066;padding:3px 8px;border-radius:50%;font-weight:bold}
        .tribe-fire{border:3px solid #ff3300 !important;box-shadow:0 0 20px #ff3300}
        .tribe-ninja{border:3px solid #6600cc !important;box-shadow:0 0 20px #6600cc}
        .tribe-wood{border:3px solid #00cc00 !important;box-shadow:0 0 20px #00cc00}
    </style>
</head>
<body>
<div class="container py-3">
    <h1 class="text-center mb-1">Star Force Deck Builder</h1>
    <p class="text-center mb-3 fw-bold text-cyan">Global Star Force Deck Builder</p>
    <div class="row">
        <div class="col-lg-8">
            <input type="text" id="search" class="form-control mb-3 bg-black border-cyan text-cyan" placeholder="Search 513 cards...">
            <div id="cardPool" class="row g-2"></div>
        </div>
        <div class="col-lg-4">
            <div class="card bg-black border-cyan text-cyan">
                <div class="card-header d-flex justify-content-between">
                    <span>Folder (<span id="count">0</span>/30)</span>
                    <div>
                        <button class="btn btn-sm btn-danger" onclick="clearFolder()">Clear</button>
                        <button class="btn btn-sm btn-success" onclick="exportDeck()">Export</button>
                        <button class="btn btn-sm btn-warning" onclick="importDeck()">Import</button>
                    </div>
                </div>
                <div id="folder" class="card-body folder"></div>
                <div class="card-footer">
                    <small>MB: <span id="mb">0</span>/6 | SB: <span id="sb">0</span>/3 | Tribe: <span id="tribe">None</span> | Noise: <span id="noise">0</span>%</small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
const cards = [];
fetch("https://raw.githubusercontent.com/Custarddolphin/sf-cards/main/cards.json").then(r=>r.json()).then(d=> {cards.push(...d); renderCards();});
let folder = [];
function renderCards(f=""){
    document.getElementById("cardPool").innerHTML = cards
        .filter(c=>c.name.toLowerCase().includes(f.toLowerCase()))
        .map(c=>`<div class="col-4 col-sm-3 col-md-2 position-relative">
            <img src="${c.img}" class="img-fluid rounded card-img" onclick="addToFolder(${c.id})" title="${c.name}\n${c.dmg} DMG | ${c.mb} MB | ${c.tribe}">
            <span class="count">0</span>
        </div>`).join("");
}
function addToFolder(id){
    const card = cards.find(c=>c.id===id);
    if(folder.length>=30) return alert("Folder full! 30/30");
    if(folder.filter(c=>c.id===id).length>=4) return alert("Max 4 copies!");
    folder.push(card); update();
}
function remove(i){folder.splice(i,1); update();}
function update(){
    document.getElementById("folder").innerHTML = folder.map((c,i)=>`<img src="${c.img}" class="rounded m-1" style="width:70px;cursor:pointer" onclick="remove(${i})">`).join("");
    document.getElementById("count").innerText = folder.length;
    document.getElementById("mb").innerText = folder.filter(c=>c.type==="Mega").length;
    document.getElementById("sb").innerText = folder.filter(c=>c.type==="Giga").length;
    const tribe = ["Fire","Ninja","Wood"].find(t=>folder.filter(c=>c.tribe===t).length>=5) || "None";
    document.getElementById("tribe").innerText = tribe;
    document.getElementById("noise").innerText = Math.round(folder.reduce((a,c)=>a+c.noise,0)/folder.length || 0);
    document.querySelectorAll(".card-img").forEach(el=>el.classList.remove("tribe-fire","tribe-ninja","tribe-wood"));
    if(tribe==="Fire") document.querySelectorAll(".card-img").forEach(el=>el.classList.add("tribe-fire"));
    if(tribe==="Ninja") document.querySelectorAll(".card-img").forEach(el=>el.classList.add("tribe-ninja"));
    if(tribe==="Wood") document.querySelectorAll(".card-img").forEach(el=>el.classList.add("tribe-wood"));
}
function clearFolder(){folder=[]; update();}
function exportDeck(){navigator.clipboard.writeText(JSON.stringify(folder.map(c=>c.id))); alert("Deck code copied!");}
function importDeck(){const code=prompt("Paste code:"); if(code) try{folder=JSON.parse(code).map(id=>cards.find(c=>c.id===id)).filter(Boolean); update();}catch(e){alert("Invalid");}}
document.getElementById("search").addEventListener("input",e=>renderCards(e.target.value));
</script>
</body>
</html>
